/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 *
*/

function Swipe(t,n){"use strict";function e(){w=p.children,m=Array(w.length),E=t.getBoundingClientRect().width||t.offsetWidth,p.style.width=w.length*E+"px";for(var n=w.length;n--;){var e=w[n];e.style.width=E+"px",e.setAttribute("data-index",n),h.transitions&&(e.style.left=n*-E+"px",a(n,T>n?-E:n>T?E:0,0))}h.transitions||(p.style.left=T*-E+"px"),t.style.visibility="visible"}function i(){T?r(T-1):n.continuous&&r(w.length-1)}function o(){w.length-1>T?r(T+1):n.continuous&&r(0)}function r(t,e){if(T!=t){if(h.transitions){for(var i=Math.abs(T-t)-1,o=Math.abs(T-t)/(T-t);i--;)a((t>T?t:T)-i-1,E*o,0);a(T,E*o,e||y),a(t,0,e||y)}else d(T*-E,t*-E,e||y);T=t,f(n.callback&&n.callback(T,w[T]))}}function a(t,n,e){s(t,n,e),m[t]=n}function s(t,n,e){var i=w[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate("+n+"px,0)"+"translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+n+"px)")}function d(t,e,i){if(!i)return p.style.left=e+"px",void 0;var o=+new Date,r=setInterval(function(){var a=+new Date-o;return a>i?(p.style.left=e+"px",L&&c(),n.transitionEnd&&n.transitionEnd.call(event,T,w[T]),clearInterval(r),void 0):(p.style.left=(e-t)*(Math.floor(100*(a/i))/100)+t+"px",void 0)},4)}function c(){x=setTimeout(o,L)}function u(){L=0,clearTimeout(x)}function l(){return w.length}var v=function(){},f=function(t){setTimeout(t||v,0)},h={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var n=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var e in n)if(void 0!==t.style[n[e]])return!0;return!1}(document.createElement("swipe"))};if(t){var w,m,E,p=t.children[0];n=n||{};var x,b,T=parseInt(n.startSlide,10)||0,y=n.speed||300,L=n.auto||0,g={},k={},D={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":f(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":f(this.transitionEnd(t));break;case"resize":f(e.call())}n.stopPropagation&&t.stopPropagation()},start:function(t){var n=t.touches[0];g={x:n.pageX,y:n.pageY,time:+new Date},b=void 0,k={},p.addEventListener("touchmove",this,!1),p.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){n.disableScroll&&t.preventDefault();var e=t.touches[0];k={x:e.pageX-g.x,y:e.pageY-g.y},b===void 0&&(b=!!(b||Math.abs(k.x)<Math.abs(k.y))),b||(t.preventDefault(),u(),k.x=k.x/(!T&&k.x>0||T==w.length-1&&0>k.x?Math.abs(k.x)/E+1:1),s(T-1,k.x+m[T-1],0),s(T,k.x+m[T],0),s(T+1,k.x+m[T+1],0))}},end:function(){var t=+new Date-g.time,e=250>Number(t)&&Math.abs(k.x)>20||Math.abs(k.x)>E/2,i=!T&&k.x>0||T==w.length-1&&0>k.x,o=0>k.x;b||(e&&!i?(o?(a(T-1,-E,0),a(T,m[T]-E,y),a(T+1,m[T+1]-E,y),T+=1):(a(T+1,E,0),a(T,m[T]+E,y),a(T-1,m[T-1]+E,y),T+=-1),n.callback&&n.callback(T,w[T])):(a(T-1,-E,y),a(T,0,y),a(T+1,E,y))),p.removeEventListener("touchmove",D,!1),p.removeEventListener("touchend",D,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==T&&(L&&c(),n.transitionEnd&&n.transitionEnd.call(t,T,w[T]))}};return e(),L&&c(),h.addEventListener?(h.touch&&p.addEventListener("touchstart",D,!1),h.transitions&&(p.addEventListener("webkitTransitionEnd",D,!1),p.addEventListener("msTransitionEnd",D,!1),p.addEventListener("oTransitionEnd",D,!1),p.addEventListener("otransitionend",D,!1),p.addEventListener("transitionend",D,!1)),window.addEventListener("resize",D,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(t,n){r(t,n)},prev:function(){u(),i()},next:function(){u(),o()},getPos:function(){return T},kill:function(){u(),p.style.width="auto",p.style.left=0;for(var t=w.length;t--;){var n=w[t];n.style.width="100%",n.style.left=0,h.transitions&&s(t,0,0)}h.addEventListener?(p.removeEventListener("touchstart",D,!1),p.removeEventListener("webkitTransitionEnd",D,!1),p.removeEventListener("msTransitionEnd",D,!1),p.removeEventListener("oTransitionEnd",D,!1),p.removeEventListener("otransitionend",D,!1),p.removeEventListener("transitionend",D,!1),window.removeEventListener("resize",D,!1)):window.onresize=null},slideCount:l}}}(window.jQuery||window.Zepto)&&function(t){t.fn.Swipe=function(n){return this.each(function(){t(this).data("Swipe",new Swipe(t(this)[0],n))})}}(window.jQuery||window.Zepto);
